r7.rs-vm
========

[![Build Status](https://travis-ci.org/naominitel/r7.rs-vm.png)](https://travis-ci.org/naominitel/r7.rs-vm)

A lightweight virtual machine for functional languages interpretation.
This is a virtual machine aimed at interpreting functional languages. It has been designed to serve as interpreting the
bytecode generated by the [https://github.com/naominitel/r7.rs-compiler](r7.rs compiler), but it should be able to be
used to implement other similar languages. The virtual machine is written in Rust.

The VM language supports various operations useful for functional programming :
* Dynamic environment allocation and deletion
* Creation of lexical closures
* Properly *tail-recursive* (Tail-call and last-call optimization)
* Dynamic typing
* Modules and libraries
* Garbage collecting

The language is stack-based and it is relatively easy to write programs with it. See [](the bytecode language guide).
The virtual machine is currently able to run very simple programs, import some libraries, and garbage-collection works.

Future features include:
* More "primitives" (in VM-implemented functions)
* A better handling of modules, in particular for cyclic references
* A native FFI

### Compiling and testing

Compiling requires a fairly recent version of Rustc (built successfully with Rust 0.9-master on nov. 11 2013) :

```
rustc main.rs
./main
```

To test it, you will also need [https://github.com/naominitel/r7.rs-compiler](the compiler).
Assuming the VM is in ```vm``` and the compiler in ```compiler```:

```
./compiler/scmc test.scm
./vm/scmrun out.bin
```
